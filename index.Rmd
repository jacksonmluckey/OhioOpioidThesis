---
author: 'Jackson Maillie Luckey'
date: 'May 2020'
institution: 'Reed College'
division: 'History and Social Sciences'
advisor: 'Denise Hare'
department: 'Economics'
degree: 'Bachelor of Arts'
title: 'Ohio Opioid Thesis'
knit: "bookdown::render_book"
site: bookdown::bookdown_site
output: 
  thesisdown::thesis_pdf: default
#  thesisdown::thesis_gitbook: default
#  thesisdown::thesis_word: default
#  thesisdown::thesis_epub: default
# If you are creating a PDF you'll need to write your preliminary content (e.g., abstract, acknowledgements) here or
# use code similar to line 22-23 for the .RMD files. If you are NOT producing a PDF, you can delete or silence lines 21-32 in this YAML header.
abstract: |
  `r if(knitr:::is_latex_output()) paste(readLines("00-abstract.Rmd"), collapse = '\n  ')`
# If you'd rather include the preliminary content in files instead of inline
# like below, use a command like that for the abstract above.  Note that a tab is 
# needed on the line after the `|`.
acknowledgements: |
  First of all, I would like to thank my thesis advisor, Denise Hare, for supporting me throughout the thesis process. I would also like to thank Nick Wilson for being my first reader, giving me invaluable feedback throughout the thesis project, and for teaching me health economics.

  Reed staff have been just as important as faculty in supporting my thesis. In particular, I would like to thank Kristin Bott and Mahria Lebow. I learned the R skills that provided the backbone of this thesis primarily through working for Kristin in Reed's mLab. Furthermore, she has connected me with resources at Reed as I ran into issues working through my thesis. Reed's data services librarian, Mahria Lebow, helped me navigate census data and saved me countless hours of futile struggling with the census API. Without their help, I would likely still be trying to gather my data.

  I would like to thank my father, James (aka Bill) Luckey, for introducing me to public health policy and the study of addiction. Without his influence in my life, I would not have gone down this path.

  I would also like to thank Arnie Aldridge, Brendan Wedehase, and Gary Zarkin for their invaluable role in my thesis. Without their guidance during my internship at RTI, I would have never developed the technical skills nor background knowledge that was necessary for producing this document.
# Specify the location of the bibliography below
bibliography: bib/thesis.bib
# Download your specific csl file and refer to it in the line below.
csl: csl/chicago-fullnote-bibliography.csl
lot: true
lof: true
# If you prefer blank lines between paragraphs, un-silence lines  40-41 (this requires package tikz)
header-includes:
  \usepackage{tikz}
---

```{r include_packages, include = FALSE}
# This chunk ensures that the thesisdown package is
# installed and loaded. This thesisdown package includes
# the template files for the thesis.
if(!require(devtools))
  install.packages("devtools", repos = "http://cran.rstudio.com")
if(!require(thesisdown))
  devtools::install_github("ismayc/thesisdown")
library(thesisdown)
```

```{r load_all_packages}
# Load the libraries and data used in this Rmd file
library(tidyverse)
library(tidycensus)
library(broom)
library(here)
library(knitr) # for kable
library(kableExtra)
library(citr)
load(here("data", "df.Rda"))
#options(knitr.table.format = "latex",
#        knitr.table.format.args = list(scientific = FALSE,
#                           big.mark = ",",
#                           digits = 5),
options(knitr.table.format.args = list(scientific = FALSE,
        big.mark = ",",
        digits = 5),
        knitr.table.booktabs = T)
opts_chunk$set(include = TRUE,
               echo = FALSE,
               message = FALSE,
               warning = FALSE) # have R code only appear in appendix
```

# Introduction {.unnumbered}

The current pioid epidemic is the worst drug epidemic in US history. While opioids are a legitimate medical treatment for acute pain, they are highly addictive and come with the risk of abuse, dependence, and fatal overdose [@aliprantisOpioidsLaborMarket2018]. Abuse of and dependence on opioids has serious consequences. Since 2016, drug overdoses have been the leading cause of accidental death in the United States [@maguireOpioidCrisisAppalachia2019]. Overdoses kill more people than gun violence, motor vehicle incidents, or the HIV/AIDS epidemic did at its peak [@quinonesDreamlandTrueTale2016; @ciccaroneFentanylUSHeroin2017; @alpertSupplySideDrugPolicy2017]. In fact, the scourge of opioid overdoses is so severe that it has lead to an increase in all-cause mortality for white Americans despite mortality decreasing for all other Americans and citizens of comparably developed countries [@caseMortalityMorbidity21st2017]. Reducing the number of deaths due to opioids is essential to reversing this trend, increasing the labor supply, and improving outcomes for millions of Americans.

```{r grab_county_geometry, echo=FALSE, message=FALSE, warning=FALSE}
base_map <- get_acs("county",
                    state = "OH",
                    table = "B02001",
                    geometry = TRUE,
                    output = "wide")
# reduce down to GEOID and geometry
base_map <- base_map %>%
  select(GEOID, geometry, county = NAME)
```

```{r map_theme}
theme_map <- theme_minimal() +
  theme(axis.title.x = element_blank(),
        axis.ticks.x = element_blank(),
        axis.title.y = element_blank(),
        axis.ticks.y = element_blank(),
        axis.text.x = element_blank(),
        axis.text.y = element_blank(),
        panel.grid.major = element_blank())
```

```{r recode_variables}
# Variable Name is the name in df
# Category is for grouping the rows of the table
# Label is for replacing Variable Name (it's a human-readable version)
var_label_category <- tribble(
  ~`Variable Name`, ~Category, ~Label,
"OD_rate", "Overdoses", "Fatal Overdoses per 10,000",
"income_pc_individual", "Demographics", "Individual Per Capita Income",
"percent_white", "Race", "Percent White",
"percent_black", "Race", "Percent Black",
"population", "Demographics", "Population",
"deaths", "Overdoses", "Overdose Deaths",
"education_b_percent_highschool_or_less", "Broad Education", "Highschool or Less",
"education_b_percent_college_or_more", "Broad Education", "Bachelor's Degree or More",
"education_s_percent_less_than_highschool", "Education", "Less than Highschool",
"education_s_percent_highschool", "Education", "Highschool",
"education_s_percent_ged", "Education", "GED",
"education_s_percent_some_college", "Education", "Some College",
"education_s_percent_college", "Education", "College",
"education_s_percent_graduate", "Education", "Graduate School",
"disability_percent_under5_male", "Disability Male", "Percent 5 or Younger",
"disability_percent_5to17_male", "Disability Male", "Percent 5 to 17",
"disability_percent_18to34_male", "Disability Male", "Percent 18 to 34",
"disability_percent_35to64_male", "Disability Male", "Percent 35 to 64",
"disability_percent_65to74_male", "Disability Male", "Percent 65 to 74",
"disability_percent_75andup_male", "Disability Male", "Percent 75 and Up",
"disability_percent_under5_female", "Disability Female", "Percent 5 or Younger",
"disability_percent_5to17_female", "Disability Female", "Percent 5 to 17",
"disability_percent_18to34_female", "Disability Female", "Percent 18 to 34",
"disability_percent_35to64_female", "Disability Female", "Percent 35 to 64",
"disability_percent_65to74_female", "Disability Female", "Percent 65 to 74",
"disability_percent_75andup_female", "Disability Female", "Percent 75 and Up",
)
recode_vars <- function(df) {
  # relies on var_label_caetgory existing in the global env
  # which is bad practice but will do for the 1st draft
  df %>%
    left_join(var_label_category, by = c("Variable Name" = "Variable Name")) %>%
    mutate(rawVarName = `Variable Name`,
           `Variable Name` = Label)
}
```